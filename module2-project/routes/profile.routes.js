const express = require('express');
const router = express.Router();
const axios = require('axios')


//Axios Call to create a User to be able to use the API services
let createUserConfig = {
    method: 'post',
    url: 'http://api.cup2022.ir/api/v1/user',
    headers: 
        "Content-Type: application/json"
        ,
    data: { //replace Date here by your personal information
        "name" : "Paul",
        "email": "paul.fresnel@hotmail.fr",
        "password": "module2-project",
        "passwordConfirm" : "module2-project"
    }
};

//To Log In with Email and Password on the API => response will give back a Token to access all the APIs services, this token is autogenerated every time you login
let loginUserConfig = {
    method: 'post',
    url: 'http://api.cup2022.ir/api/v1/user/login',
    headers: "Content-Type: application/json",
    data: { //replace Date here by your personal information
        "email": "paul.fresnel@hotmail.fr",
        "password": "module2-project",
    }
};

//To send a GET request to API using the token from login
let tokenAcessGETConfig = {
    method:'get',
    headers: `Authorization : Bearer ${process.env.API_KEY}`
}

//To send a POST request to API using the token from login
let tokenAcessPOSTConfig = {
    method:'post',
    headers: `Authorization : Bearer ${process.env.API_KEY}`
}

//Display all the Information on the incoming Matches on the "MATCHES.HBS" file
router.get("/create-user-api", (req, res, next) => {
    axios("http://api.cup2022.ir/api/v1/match" , tokenAcessGETConfig)
        .then (data=>{
            let matchesInfo = data.data.data
            console.log(matchesInfo)
            res.render('matches', {matchesInfo})
        })

});



module.exports = router;
